---
title = "Visualizing Two Categorical Variables"
output = html_document
---

## Nightlight use and myopia 

#### Displaying two categorical variables

Is there an association between the level of light in a room and the development of myopia?  To examine the differences in level of myopia for the level of light, we would create a segmented bar plot of `Light` segmented by `Sight`.  To create the segmented bar plot enter the variable name, `Light` for `explanatory` and the variable name, `Sight` for `response` in the `R` script file in line 27. Highlight and run lines 26--33.

### Two categorical variables
If we want, we can make a barchart showing **two** categorical variables. To do this, we add another argument to our `aes()` function. We will tell R to fill in the `marital_status` bars with color, according to the `born_in_us` variable. This makes a segmented or stacked barchart. 

```{r}
ggplot(GSS) + geom_bar(aes(x = marital_status, fill = born_in_us))
```

We can also make this barchart a side-by-side barchart by providing the `position` argument.

```{r}
ggplot(GSS) + geom_bar(aes(x = marital_status, fill = born_in_us), position = "dodge")
```

If we forgot what the argument was to make a side-by-side barchart, we could use R's built-in help functionality to assist us. 

```{r}
help(geom_bar)
```

Try making a barchart that shows both the `govt_or_private_employee` and `self_emp_or_works_for_somebody` variables. 

```{r}
# write code here
```



```{r, out.width="60%", echo=TRUE, eval=FALSE}
myopia %>% # Data set piped into...
ggplot(aes(x = explanatory, fill = response)) +   # This specifies the variables
  geom_bar(stat = "count", position = "fill") +  # Tell it to make a stacked bar plot
  labs(title = "Segmented Bar Plot of Night Light Use by Level of Myopia",  
       # Make sure to title your plot 
       x = "Level of Light",   # Label the x axis
       y = "") +  # Remove y axis label
    scale_fill_grey()  # Make figure black and white
```

5. Sketch the segmented bar plot created here. Be sure to label the axes.  

\vspace{2in}

6. From the segmented bar plot, estimate the proportion of no myopia for those that used a nightlight.

\vspace{0.5in}

7. Which level of light has the highest proportion of `No Myopia`?

\vspace{0.5in}

We could also plot the data using a mosaic plot.  Fill in the variable name, `Light` for `explanatory` and the variable name, `Sight` for `response` in line 38 in the `R` script file. Highlight and run lines 36--43.

```{r, out.width="60%", echo=TRUE, eval=FALSE}
myopia %>% # Data set piped into...
  ggplot() +   # This specifies the variables
  geom_mosaic(aes(x=product(explanatory), fill = response)) +  # Tell it to make a mosaic plot
  labs(title = "Mosaic Plot of Night Light Use by Level of Myopia",  
       # Make sure to title your plot 
       x = "Level of Light",   # Label the x axis
       y = "") +  # Remove y axis label
      scale_fill_grey()  # Make figure black and white
```

8.  What is similar and what is different between the segmented bar chart and the mosaic bar chart?

\vspace{1in}

9.  Explain why the bar for `Nightlight` is the widest in the mosaic plot.

\vspace{0.8in}


### Two categorical variables

We can extend this to two categorical variables by adding a second variable into our `group_by()` code. Let's make a relative frequency table showing the relationship between `marital_status` and `general_happiness`. 

```{r}
GSS %>%
  group_by(marital_status) %>% # change one thing on this line
  summarize(n = n()) %>%
  mutate(prop = n/sum(n))
```

What happens if you switch the order of the variables in the `group_by()`?

Fill in the name of the explanatory variable and the response variable in line 46 in the `R` script file, highlight and run line 46 to get the counts for each combination of levels of variables. 

```{r, echo=TRUE, eval=FALSE}
myopia %>% group_by(response) %>% count(explanatory)
```

\




