---
title: 'Lab 3Inference for a Single Mean'
author: "Your name here!"
output: html_document
---

We use three packages in this course: `tidyverse`, `mosaic`, and `infer`. To
load a package, you use the `library()` function, wrapped around the name of a
package. I've put the code to load one package into the chunk below. 

__1. Load in the other two packages you need.__

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE)
library(tidyverse)

# put in the other two packages you need here


```

## Loading in data

As usual, we'll load in the data we are going to work with: `GSS_clean.csv`.
The data should be inside the `data` folder in your RStudio Cloud. Just like
before, we'll use the `read_csv()` function to read in the data. 

```{r data-load}
GSS <- read_csv(here::here("Week 3 - Inference for One Mean", 
                           "lab",
                           "data", 
                           "GSS_clean.csv"
                           )
                )


GSS <- read_csv(here::here("data", 
                           "GSS_clean.csv"
                           )
                )
```

## Missing data

Let's make our lives easier by dropping NA values for the variable we'll be
considering today,

```{r}
GSS <- drop_na(data = GSS, 
               number_of_hours_worked_last_week)
```


## Inference

When we're doing inference about a single mean, we approximate using the
Student's t0distribution. In order to use this distribution, we need a formula
to approximate the standard error. For one mean, we get to use the same standard
error calculation in both a confidence interval and a hypothesis test,

$$
SE_{\bar{x}}=\frac{s}{\sqrt{n}}
$$

We can only use this formula (and the T distribution) for inference if the conditions for inference are met. What are those conditions?


## One mean

For this lab, we'll be considering the variable
`number_of_hours_worked_last_week`. Say we wanted to know if the true mean
number of hours worked in a week is different than 40. We could write out our
null and alternative hypotheses like so:

$$
H_0: \mu = 40 \\
H_A: \mu\neq 40
$$

Then, we can find our point estimate (otherwise known as our sample statistic,
or sample mean). See if you can find the point estimate:

```{r}

```

Okay, so that's not exactly 40. But, we need to use statistics to determine if it is significantly different. That's what hypothesis testing can help us with. 


## Using the t-distribution 

Let's use the `t_test()` function to do a hypothesis test.  

```{r}
GSS %>%
  t_test(response = number_of_hours_worked_last_week, alternative = "two-sided", mu = 40)
```

Notice that I once again have to specify the alternative (the options are "two-sided", "greater" or "less") and the null mu I'm testing against. 

What is our generic conclusion here?

What does that mean in context? 

### Confidence interval for one mean

Okay, so our hypothesis test tells us that we have evidence that the mean is different than 40 hours. But, we might also want to know what some other reasonable values we could have observed. That's what a confidence interval helps us determine. 

Again, I could use `t_test()` to help me,

```{r}
GSS %>% 
  t_test(response = number_of_hours_worked_last_week, conf_int = TRUE)
```

How can we interpret this confidence interval? 

## Using a Bootstrap Distribution

The bootstrap is a procedure to "pick yourself up by your bootstraps" and create a sampling distribution when you can't take repeated samples from the population. Instead, we are going to re-sample from our existing sample, and use those new "bootstrap samples" to generate sample statistics. 

In order to take a bootstrap sample, we need to specify which variable we are interested in, then we need to generate some samples. Let's start with generating one bootstrap sample. 


```{r}
bootstrap_sample <- GSS %>%
  specify(response = highest_year_of_school_completed) %>%
  generate(reps = 1, type = "bootstrap")
```

Look at the `bootstrap_sample` object in your Environment. How many observations does it have? How many variables?




We could make a histogram of that sample. 

```{r}

```

Does this look similar to the distribution of the original data? What is different? 

Does your histogram look the same as mine?

## Bootstrap distribution

Just one bootstrap sample isn't that interesting. In order to make an interval, we need to repeat this process many times, where many usually means at least 1,000. We don't want to store 1,000 full datasets, so it's easier to add a `calculate()` verb to the end of our pipeline. 

Let's do that here.

```{r}
boot <- GSS %>%
  specify(response = highest_year_of_school_completed) %>%
  generate(reps = 1000, type = "bootstrap") %>%
  calculate(stat = "mean")
```

How many observations does that dataset have? How many variables? 




Let's look at the distribution of that statistic. 
```{r}
ggplot(boot) + geom_histogram(aes(x = stat))
```

Does this look like our original histograms?

What is the mean of that statistic?

```{r}

```

Does that make sense?




## Bootstrap intervals

We could use the 95\% rule to eyeball a confidence interval that contained the middle 95\% of the distribution. My guess would be around (13.65, 13.85). But, we'd like to be more precise. The `get_ci()` function will help us with this.

```{r}
get_ci(boot)
```

How do we interpret this output?


